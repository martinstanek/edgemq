@page "/"
@using EdgeMq.Client
@inject IEdgeMqClient EdgeMqClient;

<PageTitle>EdgeMQ Dashboard</PageTitle>

<div>
    <MudText Typo="Typo.h5">Queues</MudText>
</div>

@foreach (var queue in forecasts)
{
    <MudCard>
        <MudCardHeader>
            <CardHeaderContent>
                <MudText Typo="Typo.h6">@queue.Name</MudText>
            </CardHeaderContent>
        </MudCardHeader>
        <MudCardContent>
            <MudText>@queue.Mode</MudText>
            <MudText>@queue.Metrics.MessagesInPerSecond.ToString("F")</MudText>
            <MudText>@queue.Metrics.MessagesOutPerSecond.ToString("F")</MudText>
        </MudCardContent>
    </MudCard>
}

<br/>

<MudTable Items="@forecasts" Hover="true" >
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>Mode</MudTh>
        <MudTh>Messages</MudTh>
        <MudTh>Threshold</MudTh>
        <MudTh>In/s</MudTh>
        <MudTh>Out/s</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Mode">@context.Mode</MudTd>
        <MudTd DataLabel="Messages">@context.Metrics.MessageCount</MudTd>
        <MudTd DataLabel="Threshold" >@context.Metrics.MaxMessageCount</MudTd>
        <MudTd DataLabel="MessagesInPerSecond">@context.Metrics.MessagesInPerSecond.ToString("F")</MudTd>
        <MudTd DataLabel="MessagesOutPerSecond" >@context.Metrics.MessagesOutPerSecond.ToString("F")</MudTd>
    </RowTemplate>
</MudTable>